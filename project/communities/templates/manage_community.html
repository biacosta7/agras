{% extends 'base.html' %}
{% load static %}
{% block title %}Gerenciamento da Comunidade{% endblock %}

{% block content %}
<div class="bg-white min-h-screen flex px-4 md:px-8 py-10 mx-auto ">
    <!-- Sidebar -->
    <div class="bg-[#8ABF17] flex flex-col items-center rounded-[20px] w-full lg:w-[220px] h-auto lg:h-[850px] mb-8 lg:mb-0"> 
        <a href="/"><img class="w-[146px] mt-12 mb-8" src="{% static 'assets/logo-branco-h.png' %}" alt="AGRAS"> </a>   
        <div class="flex flex-col gap-y-6 mt-12 w-full px-4 flex-grow">
            <a href="" class="text-[14px] font-normal text-white flex items-center cursor-pointer"> 
                <span class="material-icons mr-2">dashboard</span> Dashboard
            </a>
            <a href="{% url 'manage_community' community.id %}" class="text-[14px] font-normal text-white flex items-center cursor-pointer">
                <span class="material-icons mr-2">equalizer</span> Gerenciamento
            </a>
            <a href="" class="text-[14px] font-normal text-white flex items-center cursor-pointer">
                <span class="material-icons mr-2">group</span> Time
            </a>
            <a href="" class="text-[14px] font-normal text-white flex items-center cursor-pointer">
                <span class="material-icons mr-2">trending_up</span> Estatísticas
            </a>
            <a href="" class="text-[14px] font-normal text-white flex items-center cursor-pointer">
                <span class="material-icons mr-2">settings</span> Configurações
            </a>
            <div class="flex-grow"></div>
            <form action="{% url 'logout' %}" method="POST" class="w-full px-4 mb-12">
                {% csrf_token %}
                <button class="text-[14px] font-normal text-white flex items-center cursor-pointer w-full">
                    <span class="material-icons mr-2">logout</span>Sair
                </button>
            </form>
        </div>
    </div>

    <!-- Main content -->
    <div class="flex-grow px-4 lg:px-8 py-10">
        <!-- Toggle button for smaller screens -->
        <button id="menu-toggle" class="lg:hidden text-gray-600 focus:outline-none mb-4">
            <span class="material-icons">menu</span>
        </button>

        <h1 class="text-2xl font-bold mb-4">Gerenciamento da Comunidade</h1>

        <!-- Seção de solicitações de acesso -->
        <div class="bg-gray-100 p-4 rounded-lg mb-6 max-w-[500px]">
            <h2 class="text-xl font-semibold mb-4">Solicitações de Acesso</h2>
            <ul class="list-disc pl-5">
                {% for request in membership_requests %}
                <li class="flex justify-between items-center mb-4 p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                    <div class="flex flex-col">
                        <span class="font-semibold text-gray-800">Usuario: {{ request.user }}</span>
                        <span class="text-gray-600">Email: {{ request.user.email }}</span>
                    </div>
                    <div class="flex flex-col items-end">
                        <span class="text-sm text-gray-500">Status: {{ request.status }}</span>
                        <span class="text-xs text-gray-400">{{ request.request_date }}</span>
                    </div>
                    <div class="flex space-x-2">
                        <form action="" method="post" class="inline-flex items-center justify-center">
                            {% csrf_token %}
                            <button type="submit" class="bg-green-500 text-white rounded-full p-0.5 transition hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 flex items-center justify-center">
                                <span class="material-icons">check</span>
                            </button>
                        </form>
                        <form action="" method="post" class="inline-flex items-center justify-center">
                            {% csrf_token %}
                            <button type="submit" class="bg-red-500 text-white rounded-full p-0.5 transition hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400 flex items-center justify-center">
                                <span class="material-icons">close</span>
                            </button>
                        </form>
                    </div>
                </li>
                
                {% empty %}
                    <li>Não há solicitações de acesso no momento.</li>
                {% endfor %}
            </ul>
        </div>
        
        

        <!-- Botões de Editar e Excluir -->
        <div class="flex space-x-4 mb-6">
            <button id="edit-button" class="bg-[#4CAF50] text-white p-2 rounded">Editar Comunidade</button>
            <button id="delete-button" class="bg-red-500 text-white p-2 rounded">Excluir Comunidade</button>
        </div>
    </div>
</div>
{% endblock %}
